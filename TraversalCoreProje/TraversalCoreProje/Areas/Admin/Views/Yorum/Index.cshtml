@using EntityLayer.Concrete
@model List<Yorumlar>
@{
    Layout = "AdminLayout";
}

<div class="container-xxl flex-grow-1 container-p-y">
    <h4 class="fw-bold py-3 mb-4">Yorumlar</h4>
    <div class="card">
        <h5 class="card-header">Yorum Listesi</h5>
        <div class="table-responsive text-nowrap">
            <table class="table table-bordered">
                <tr>
                    <th>#</th>
                    <th>Kullanıcı</th>
                    <th>Blog</th>
                    <th>Yorum</th>
                    <th>Tarih</th>
                    <th>Sil</th>
                </tr>
                @foreach (var x in Model)
                {
                    <tr>
                        <th>@x.YorumId</th>
                        <td>@x.KullaniciAdi</td>
                        <td>@x.VarisNoktalari.Sehir</td>
                        <td>@x.Yorum</td>
                        <td>@x.Tarih.ToString("dd MMMM yyyy")</td>
                        <td><a href="#" onclick="deleteRoute(@x.YorumId)" class="btn btn-outline-danger">Sil</a></td>
                    </tr>
                }
            </table>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    function deleteRoute(id) {
        Swal.fire({
            title: 'Bu yorumu silmek istiyor musunuz?',
            text: "Yorum pasif hale getirilecek!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            cancelButtonColor: '#3085d6',
            confirmButtonText: 'Evet, sil!',
            cancelButtonText: 'İptal'
        }).then((result) => {
            if (result.isConfirmed) {
                // Eğer evet derse Controller'daki aksiyona yönlendiriyoruz
                window.location.href = "/Admin/Yorum/YorumSil/" + id;
            }
        })
    }
</script>