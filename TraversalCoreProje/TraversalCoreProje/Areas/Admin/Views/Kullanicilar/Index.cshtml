@using EntityLayer.Concrete
@model List<AppUser>
@{
    Layout = "AdminLayout";
    int sayac = 0;
}

<div class="container-xxl flex-grow-1 container-p-y">
    <h4 class="fw-bold py-3 mb-4">Kullanıcılar</h4>
    <div class="card">
        <h5 class="card-header">Kullanıcı Listesi</h5>
        <div class="table-responsive text-nowrap">
            <table class="table table-bordered">
                <tr>
                    <th>#</th>
                    <th>Ad Soyad</th>
                    <th>Kullanıcı Adı</th>
                    <th>E Posta</th>
                    <th>Yorumlar</th>
                    <th>Tur Geçmişi</th>
                    <th>Rol İşlemleri</th>
                    <th>Sil</th>
                </tr>
                @foreach (var x in Model)
                {
                    <tr>
                        @{
                            sayac = sayac + 1;
                        }
                        <th>@sayac</th>
                        <td>@x.Ad @x.Soyad</td>
                        <td>@x.UserName</td>
                        <td>@x.Email</td>
                        <td><a href="/Admin/Kullanicilar/KullaniciYorumlari/@x.Id" class="btn btn-outline-info">Yorumlar</a></td>
                        <td><a href="/Admin/Kullanicilar/KullaniciTurlari/@x.Id" class="btn btn-outline-primary">Tur Geçmişi</a></td>
                        <td><a href="/Admin/Rol/RolAta/@x.Id" class="btn btn-outline-warning">Rol Ata</a></td>
                        <td><a href="#" onclick="deleteRoute(@x.Id)" class="btn btn-outline-danger">Sil</a></td>
                    </tr>
                }
            </table>
        </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    function deleteRoute(id) {
        Swal.fire({
            title: 'Bu kullanıcıyı silmek istiyor musunuz?',
            text: "Kullanıcı sistemden tamamen kaldırılacak!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            cancelButtonColor: '#3085d6',
            confirmButtonText: 'Evet, sil!',
            cancelButtonText: 'İptal'
        }).then((result) => {
            if (result.isConfirmed) {
                // Eğer evet derse Controller'daki aksiyona yönlendiriyoruz
                window.location.href = "/Admin/Kullanicilar/KullaniciSil/" + id;
            }
        })
    }
</script>